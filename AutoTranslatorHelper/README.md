This mod package contains [XUnity.AutoTranslator](https://github.com/bbepis/XUnity.AutoTranslator) by bbepis, a preset config file and a [helper plguin](https://github.com/starfi5h/DSP_Mod_Support/tree/main/AutoTranslatorHelper) to avoid spammy text.  
此套件包含 bbepis 的 [XUnity.AutoTranslator](https://github.com/bbepis/XUnity.AutoTranslator)、一個預設設定檔和 [helper plguin](https://github.com/starfi5h/DSP_Mod_Support/tree/main/AutoTranslatorHelper) 以避免重複翻譯。  

The goal of this mod is to translate text in the mods, or the strings in the game that are missing translation.  
目的是用來翻譯mod中的文字，或著補齊遊戲中缺失的翻譯。  

For translating the whole game, it's recommended to use community translation from Crowdin instead. Check the following page to learn how to convert the json file to the game locale files. https://dspcd.github.io/translation-converter/  
對於全部遊戲文本的翻譯，可以改用以上網頁的方法下載Crowdin的社群翻譯。  
简中用户可以使用[SF_ChinesePatch](https://thunderstore.io/c/dyson-sphere-program/p/starfi5h/SF_ChinesePatch/)汉化补丁翻译mod。

## AutoTranslatorHelper Changelog
https://github.com/starfi5h/DSP_Mod_Support/tree/main/AutoTranslatorHelper  
v5.3.100 - Initial release. (game version 0.10.30.22292)  

# XUnity Auto Translator

The full README can be found in the github repo https://github.com/bbepis/XUnity.AutoTranslator  

## Introduction
This is an advanced translator plugin that can be used to translate Unity-based games automatically and also provides the tools required to translate games manually. It does (obviously) go to the internet, in order to provide the automated translation, so if you are not comfortable with that, don't use it.

## Key Mapping
The following key inputs are mapped:
 * ALT + 0: Toggle XUnity AutoTranslator UI. (That's a zero, not an O)
 * ALT + 1: Toggle Translation Aggregator UI.
 * ALT + T: Alternate between translated and untranslated versions of all texts provided by this plugin.
 * ALT + R: Reload translation files. Useful if you change the text and texture files on the fly. Not guaranteed to work for all textures.
 * ALT + U: Manual hooking. The default hooks wont always pick up texts. This will attempt to make lookups manually. Will not hook text components from frameworks not enabled.
 * ALT + F: If OverrideFont is configured, will toggle between overridden and default font.
 * ALT + Q: Reboot the plugin if it was shutdown. This will only work if the plugin was shut down due to consecutive errors towards the translation endpoint. Should only be used if you have reason to believe you have remedied the problem (such as changed VPN endpoint etc.) otherwise it will just shut down again.

## Installation
Via mod manager [r2modman](https://thunderstore.io/package/ebkr/r2modman/).  
Manual install:
1. Install [BepInEx 5.4.17](https://thunderstore.io/c/dyson-sphere-program/p/xiaoye97/BepInEx/) framework
2. Download the mod zip file
3. Unzip and put the content into BepInEx folder  
`config\AutoTranslatorConfig.ini` -> `BepInEx\config`  
`core\XUnity.Common.dll` -> `BepInEx\core`  
`plugins\XUnity.AutoTranslator`, `plugins\XUnity.ResourceRedirector`, `plugins\AutoTranslatorHelper.dll` -> `BepInEx\plugins`  

## Configuration
The package contains a preset config file `BepInEx\Config\AutoTranslatorConfig.ini`.  
It can be found in Config editor of the mod manager. The changes will take effect after restarting the game.  
Note: this file will reset each time the mod is updated.

Here are a few important config values:  
```ini
[Service]
Endpoint=GoogleTranslateV2       ;Endpoint to use. See the [translators section] for valid values.
FallbackEndpoint=                ;Endpoint to automatically fallback to if the primary endpoint fails for a specific translation.

[General]
Language=en                      ;The language to translate into
FromLanguage=zh-CN               ;The original language of the game. "auto" is also supported for some endpoints, but it is generally not recommended
```
[List of Endpoint available translators](https://github.com/bbepis/XUnity.AutoTranslator?tab=readme-ov-file#translators)  
The default behavior is to translate simplified chinese into english.  

```ini
[Files]
Directory=Translation\{Lang}\Text                                   ;Directory to search for cached translation files. Can use placeholder: {GameExeName}, {Lang}
OutputFile=Translation\{Lang}\Text\_AutoGeneratedTranslations.txt   ;File to insert generated translations into. Can use placeholders: {GameExeName}, {Lang}
SubstitutionFile=Translation\{Lang}\Text\_Substitutions.txt         ;File that contains substitution applied before translations. Can use placeholders: {GameExeName}, {Lang}
PreprocessorsFile=Translation\{Lang}\Text\_Preprocessors.txt        ;File that contains preprocessors to be applied before sending a text to a translator. Can use placeholders: {GameExeName}, {Lang}
PostprocessorsFile=Translation\{Lang}\Text\_Postprocessors.txt      ;File that contains postprocessors to be applied after receiving a text from a translator. Can use placeholders: {GameExeName}, {Lang}

[TextFrameworks]
EnableUGUI=True                  ;Enable or disable UGUI translation
EnableNGUI=True                  ;Enable or disable NGUI translation
EnableTextMeshPro=True           ;Enable or disable TextMeshPro translation
EnableTextMesh=True              ;Enable or disable TextMesh translation
EnableIMGUI=True                 ;Enable or disable IMGUI translation
```
`EnableTextMesh`, `EnableIMGUI` are set to true to translate text in mods.  
You can manually edit the translated text in the cache file `_AutoGeneratedTranslations.txt`.  

```ini
[Behaviour]
MaxCharactersPerTranslation=400  ;Max characters per text to translate. Max 2500.
IgnoreWhitespaceInDialogue=False ;Whether or not to ignore whitespace, including newlines, in dialogue keys
IgnoreWhitespaceInNGUI=True      ;Whether or not to ignore whitespace, including newlines, in NGUI
MinDialogueChars=20              ;The length of the text for it to be considered a dialogue
OverrideFont=                    ;Overrides the fonts used for texts when updating text components. NOTE: Only works for UGUI
```
`MaxCharactersPerTranslation` is set to 400 to follow the redistribution agreement. The user can set this value higher to translate some long dialogue in guide book or descriptions.  
`IgnoreWhitespaceInDialogue` will break some formated text in game so it is disabled.  
`OverrideFont`: [if specify a font that is not supported, the plugin will print out which fonts are supported which are just the fonts installed in the OS.](https://github.com/bbepis/XUnity.AutoTranslator/issues/27)  


## Acknowledgement
Plugin author: [bbepis](https://github.com/bbepis)  
Icon: https://uxwing.com/language-translation-icon/